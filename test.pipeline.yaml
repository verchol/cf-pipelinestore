version: '1.0'
steps:
 
  before_and_after:
    image: alpine/git
    commands :
      - git clone https://${{GIT_TOKEN}}@github.com/${{REPO_OWNER}}/${{REPO_NAME}}.git
      - mv submit.json > submit.new.json
      - git checkout HEAD~1 submit.json 
      - mv submit.json > submit.old.json

  find_new_plugins:
    image: verchol/pluginsdetector:latest
    working_directory: ${{main_clone}}
    description: collectplugins...
    cmd:
      - --prev Dockerfile --current Dockerfile